Source URL: https://developers.google.com/maps/documentation/javascript/address-validation/build-validation-logic?hl=ko
Title: 빌드 유효성 검사 로직

의견 보내기

빌드 유효성 검사 로직

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

이 제품 또는 기능은 미리보기(GA 이전) 버전입니다.
GA 이전 제품과 기능은 지원이 제한적일 수 있으며, GA 이전 제품과 기능에 대한 변경사항은 다른 GA 이전 버전과 호환되지 않을 수 있습니다. GA 이전 버전 제품 및 서비스에는 Google Maps Platform 서비스별 약관 [https://cloud.google.com/maps-platform/terms/maps-service-terms?hl=ko]이 적용됩니다. 자세한 내용은 출시 단계 설명 [https://developers.google.com/maps/launch-stages?hl=ko]을 참고하세요.

이 문서에서는 Address Validation API의 다양한 응답을 처리하는 주소 확인 시스템을 빌드하는 프로세스를 설명합니다.
대답을 올바르게 사용하고, API의 다른 신호를 조사하고, 고객에게 추가 정보를 요청해야 하는 시점과 방법을 설명합니다.

일반적으로 API 응답은 시스템에서 주소를 처리해야 하는 다음 방법을 결정합니다.

handyman
수정: 주소의 품질이 낮습니다.
추가 정보를 요청해야 합니다.

edit
확인: 주소의 품질은 높지만 입력 주소와 차이가 있습니다. 확인을 요청할 수 있습니다.
check
수락: 주소가 고품질입니다. 제공된 주소를 수락할 수 있습니다.

키 용도

이 문서는 API 응답을 가장 잘 분석하고 제공된 주소로 취할 다음 조치를 결정하도록 시스템을 수정하는 데 도움이 됩니다. 다음 의사 코드는 가능한 흐름을 보여줍니다.
if (the API response indicates significant problems in the address)
FIX - prompt the user to fix the address
else if (the API response indicates less significant problems in the address)
CONFIRM - confirm with the user that the address is correct
else
ACCEPT - continue with the address returned by the API.

정확한 로직은 상황에 따라 다릅니다. 자세한 내용은 구현 안내 [https://developers.google.com/maps/documentation/javascript/address-validation/build-validation-logic?hl=ko#implementation_guidance]를 참고하세요. 확장 구성요소 라이브러리 [https://github.com/googlemaps/extended-component-library/blob/main/src/address_validation]에 있는 이 로직의 오픈소스 구현을 사용할 수도 있습니다.

워크플로 개요

아래 표에는 시스템에 대한 두 가지 작업이 요약되어 있습니다.

수정, 확인, 수락 동작에 따른 사용할 워크플로
대답에서 확인할 첫 번째 신호입니다. 여기에 설명된 신호는 verdict 속성에서 가져오며 확인해야 하는 유일한 신호는 아니지만 주소 품질의 초기 지표를 제공합니다. 각 동작 유형은 조사해야 할 추가 신호를 설명하는 이 문서의 섹션에 해당합니다.

| 시스템 동작 |
| --- |
| handyman 주소 수정 | verdict의 대답에 제공해야 하는 중요한 정보가 누락되어 있다고 표시됩니다. API에서 반환된 주소는 배송 가능한 품질이 아닐 수 있습니다. 워크플로 필요한 경우 주소 구성요소를 조사합니다. 고객에게 주소 문제를 해결하도록 안내합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. 결과 신호 다음 중 하나라도 해당하는 경우 validationGranularity이 OTHER로 설정됩니다. addressComplete 은 false입니다. | 워크플로 필요한 경우 주소 구성요소를 조사합니다. 고객에게 주소 문제를 해결하도록 안내합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. | 결과 신호 다음 중 하나라도 해당하는 경우 validationGranularity이 OTHER로 설정됩니다. addressComplete 은 false입니다. |
| 워크플로 필요한 경우 주소 구성요소를 조사합니다. 고객에게 주소 문제를 해결하도록 안내합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. | 결과 신호 다음 중 하나라도 해당하는 경우 validationGranularity이 OTHER로 설정됩니다. addressComplete 은 false입니다. |
| edit 주소 확인 | verdict의 응답은 결과물 주소를 나타내지만 원래 입력이 변경되었습니다. 맞춤법이 수정되었거나 확인할 수 있는 데이터를 추론합니다. 워크플로 수정이 필요한 부분: 필요한 경우 주소 구성요소를 조사합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. 수정할 필요가 없습니다. 주소로 계속 진행합니다. 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에 ROUTE이 포함됨 addressComplete 은 true입니다. hasInferredComponents 필드가 true이거나 hasReplacedComponents 필드가 true입니다. | 워크플로 수정이 필요한 부분: 필요한 경우 주소 구성요소를 조사합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. 수정할 필요가 없습니다. 주소로 계속 진행합니다. | 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에 ROUTE이 포함됨 addressComplete 은 true입니다. hasInferredComponents 필드가 true이거나 hasReplacedComponents 필드가 true입니다. |
| 워크플로 수정이 필요한 부분: 필요한 경우 주소 구성요소를 조사합니다. 업데이트된 주소의 유효성 검사를 요청합니다. 주소로 계속 진행합니다. 수정할 필요가 없습니다. 주소로 계속 진행합니다. | 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에 ROUTE이 포함됨 addressComplete 은 true입니다. hasInferredComponents 필드가 true이거나 hasReplacedComponents 필드가 true입니다. |
| check 주소 수락 | Address Validation API 응답은 주소의 품질이 매우 우수함을 나타냅니다. 워크플로 반품된 주소로 진행합니다. 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에는 PREMISE 이상이 포함됩니다. addressComplete 은 true입니다. 추론되거나 대체된 구성요소가 없습니다. | 워크플로 반품된 주소로 진행합니다. | 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에는 PREMISE 이상이 포함됩니다. addressComplete 은 true입니다. 추론되거나 대체된 구성요소가 없습니다. |
| 워크플로 반품된 주소로 진행합니다. | 결과 신호 다음 사항이 모두 적용됩니다. validationGranularity에는 PREMISE 이상이 포함됩니다. addressComplete 은 true입니다. 추론되거나 대체된 구성요소가 없습니다. |

구현 안내

주소 유효성 검사 신호에 시스템이 응답하는 방식을 설계할 때 다음 권장사항을 따르면 더 효과적인 응답 모델을 빌드할 수 있습니다. 하지만 이는 추천일 뿐이므로 구현이 비즈니스 모델에 적합해야 합니다.

|  | 안내 | 세부정보 |
| --- | --- | --- |
| 위험 수준 | 수정하라는 메시지를 표시하는 것과 입력된 주소를 그대로 수락하는 것 사이의 균형을 맞출 때 상황에 맞는 허용 수준을 고려하세요. | Address Validation API는 위험 수준과 통합하여 검증 프로세스를 최적화할 수 있는 다양한 신호를 반환합니다. 예를 들어 주소에 확인되지 않은 번지가 있는 경우에도 이를 수락할 수 있습니다. 반면 비즈니스 운영에 더 정확한 주소가 필요한 경우 사용자에게 메시지를 표시할 수 있습니다. 두 카테고리 중 하나에 속할 수 있는 예는 주소 수락 - 예의 미국 외 지역에서 확인되지 않은 번지수를 참고하세요. |
| 주소 수락 | 고객이 프롬프트에 응답하지 않는 경우 시스템에서 원래 입력을 허용하는 것이 좋습니다. | 이 경우 고객이 시스템에 없는 주소(예: 신축 건물)를 입력했을 수 있습니다. |

데모 사용해 보기 이 문서의 나머지 부분에서는 다양한 예를 사용하여 위에서 설명한 수정, 확인, 수락 흐름 프로세스를 이해하는 데 도움을 줍니다. Maps JavaScript API의 주소 유효성 검사 데모 [https://developers.google.com/maps/documentation/javascript/address-validation/demo?hl=ko]에 입력하여 이러한 예의 결과를 살펴볼 수 있습니다.

주소 수정

결과에 주소가 배송 불가능하다고 명확하게 표시되는 경우 주소를 수정합니다. 그러면 시스템에서 고객에게 필요한 정보를 제공하라는 메시지를 표시할 수 있으며, 그 후에 워크플로를 다시 실행하여 배송 가능 주소를 가져옵니다.

신호 수정

Address Validation API는 주소를 수정해야 하는지 알 수 있는 여러 신호를 제공합니다.

1. 유효성 검사 세부사항 및 누락된 구성요소

다음 두 가지 신호는 문제가 있는 주소를 가장 잘 나타냅니다.

validationGranularity [https://developers.google.com/maps/documentation/javascript/reference/address-validation?hl=ko#Verdict.validationGranularity] 필드가 OTHER이면 시스템에서 주소 구성요소 신호를 조사하여 오류가 발생한 위치와 오류를 수정하는 방법을 자세히 알아봐야 합니다.
후처리된 address 객체 [https://developers.google.com/maps/documentation/javascript/reference/address-validation?hl=ko#Address]가 missingComponentTypes 필드를 반환할 때마다 시스템에서 해당 구성요소를 확인해야 합니다.
구성요소가 누락되면 주소가 불완전해지고 배송할 수 없게 됩니다.

2. 기타 신호

Address Validation API는 특정 문제를 진단하는 데 도움이 되는 다른 신호도 제공합니다.

| 의심스러운 구성요소 | 구성요소의 확인 수준 enum이 UNCOMFIRMED_AND_SUSPICIOUS이면 구성요소가 잘못되었을 수 있습니다. |
| --- | --- |
| 해결되지 않은 구성요소 | unresolvedToken은 주소의 유효한 부분으로 인식되지 않는 입력의 일부입니다. |

3. 미국 주소 신호

미국 주소에만 적용되는 특정 필드는 주소를 배송할 수 없으므로 수정해야 한다는 유용한 신호를 제공합니다. 수정이 필요한 주소의 경우 다음이 표시됩니다.

| dpvConfirmation | N, D 또는 비어 있음 |
| --- | --- |

dpvConfirmation에 관한 자세한 내용은 미국 주소 처리 [https://developers.google.com/maps/documentation/javascript/address-validation/handle-us-address?hl=ko]를 참고하세요.

주소 수정 예 [https://developers.google.com/maps/documentation/javascript/address-validation/fix-address-example]

주소 확인

평결에 Address Validation API가 검증된 주소를 생성하기 위해 주소 구성요소를 추론하거나 변경한 것으로 표시되면 주소를 확인합니다. 이 경우 배송 가능한 주소가 있지만 결과 주소가 고객이 의도한 주소인지 더 확실하게 확인하고 싶습니다.

고객에게 올바른 프롬프트를 제공하기 위해 로직은 서비스에서 플래그가 지정된 구성요소를 식별하여 API가 구성요소에 적용한 작업 또는 플래그(예: inferred, replaced 또는 spellCorrected)를 확인합니다.
참조에서 AddressComponent [https://developers.google.com/maps/documentation/javascript/reference/address-validation?hl=ko#AddressComponent]를 확인하세요.
참고: 고객에게 주소를 확인하거나 유효한 것으로 간주할지 결정할 때 위험 수준 [https://developers.google.com/maps/documentation/javascript/address-validation/build-validation-logic?hl=ko#implementation_guidance]을 고려하세요.
신호 확인

Address Validation API는 주소를 확인해야 하는지 알 수 있는 여러 신호를 제공합니다.

1. 유효성 검사 세부사항

ROUTE 이상의 validationGranularity [https://developers.google.com/maps/documentation/javascript/reference/address-validation?hl=ko#Verdict.validationGranularity]가 허용되지만 PREMISE 또는 SUBPREMISE가 더 강력한 전송 가능성 신호를 제공합니다.

2. 기타 신호

고객에게 주소 입력을 확인하기로 결정할 때 평결은 조사할 구성요소를 결정하기 위해 다음 정보도 제공합니다.

| 추론된 데이터 | hasInferredComponents 필드가 true이면 API가 다른 주소 구성요소에서 수집한 정보를 입력한 것입니다. |
| --- | --- |
| 교체된 데이터 | hasReplacedComponents 필드가 true인 경우 API는 입력된 데이터를 주소를 유효하게 만드는 데이터로 대체했습니다. |

3. 미국 주소 신호

미국 주소에만 적용되는 특정 필드는 고객에게 세부정보를 확인해야 하는 논리를 나타냅니다. 다음 중 하나가 적용됩니다.

| dpvConfirmation | S dpvConfirmation에 관한 자세한 내용은 미국 주소 처리를 참고하세요. |
| --- | --- |
| 응답 주소 | 값이 subpremise인 missingComponentTypes 필드를 포함합니다. 참고: 필드에 subpremise 이외의 유형이 포함된 경우 작업은 주소 수정 카테고리에 속합니다. 지오코딩 문서에서 주소 유형의 전체 목록을 참고하세요. |

주소 확인 예 [https://developers.google.com/maps/documentation/javascript/address-validation/confirm-address-example]

주소 수락

주소가 배송 가능하고 다운스트림 프로세스에서 추가 고객 상호작용 없이 사용할 수 있다는 확신이 높은 경우 주소를 수락합니다.

신호 수락

Address Validation API는 주소를 확인해야 하는지 알 수 있는 여러 신호를 제공합니다.

1. 유효성 검사 세부사항

PREMISE 이상의 validationGranularity가 허용되지만 경우에 따라 ROUTE도 배송 가능한 주소를 나타냅니다.

2. 기타 신호

고품질 주소에 대한 평결은 다음도 제공해야 합니다.

대체된 데이터가 없음 이 경우는 hasReplacedComponents: FALSE입니다.
추론된 구성요소가 없음 이 경우는 hasInferredComponents: FALSE입니다.

3. 미국 주소 신호

미국 주소에만 적용되는 특정 필드는 배송 가능한 고품질 주소를 나타냅니다. 허용되는 미국 주소의 경우 다음이 표시됩니다.

| dpvConfirmation | Y dpvConfirmation에 관한 자세한 내용은 미국 주소 처리를 참고하세요. |
| --- | --- |

허용되는 주소 예 [https://developers.google.com/maps/documentation/javascript/address-validation/accept-address-example]

의견 보내기