Source URL: https://developers.google.com/workspace/gmail/api/guides/handle-errors

이 페이지는 Cloud Translation API [https://cloud.google.com/translate/?hl=ko]를 통해 번역되었습니다.
Switch to English
홈 [https://developers.google.com/?hl=ko]
Google Workspace [https://developers.google.com/workspace?hl=ko]
Gmail [https://developers.google.com/workspace/gmail?hl=ko]
가이드 [https://developers.google.com/workspace/gmail/api/guides?hl=ko]
의견 보내기
오류 해결
bookmark_border
이 페이지의 내용
400 오류 해결: 잘못된 요청
401 오류 해결: 사용자 인증 정보가 잘못됨
403 오류 해결: 사용량 한도 초과
403 오류 해결: 일일 한도 초과
403 오류 해결: 사용자 비율 한도 초과
Gmail API는 두 가지 수준의 오류 정보를 반환합니다.
헤더의 HTTP 오류 코드 및 메시지입니다.
오류 처리 방법을 결정하는 데 도움이 되는 추가 세부정보가 포함된 응답 본문의 JSON 객체입니다.
Gmail 앱은 REST API를 사용할 때 발생할 수 있는 모든 오류를 포착하고 처리해야 합니다. 이 가이드에서는 특정 API 오류를 해결하는 방법을 설명합니다.
400 오류 해결: 잘못된 요청
이 오류는 코드의 다음 오류로 인해 발생할 수 있습니다.
필수 입력란 또는 매개변수가 제공되지 않았습니다.
제공된 값 또는 제공된 필드의 조합이 잘못되었습니다.
잘못된 첨부파일입니다.
참고: 이 목록은 전체 목록이 아니며, 다른 경우에도 400 오류가 발생할 수 있습니다.
다음은 이 오류의 샘플 JSON 표현입니다.
{
  "error": {
    "code": 400,
    "errors": [
      {
        "domain": "global",
        "location": "orderBy",
        "locationType": "parameter",
        "message": "Sorting is not supported for queries with fullText terms. Results are always in descending relevance order.",
        "reason": "badRequest"
      }
    ],
    "message": "Sorting is not supported for queries with fullText terms. Results are always in descending relevance order."
  }
}
이 오류를 수정하려면 message 필드를 확인하고 그에 따라 코드를 조정하세요.
401 오류 해결: 사용자 인증 정보가 잘못됨
401 오류는 사용 중인 액세스 토큰이 만료되었거나 무효임을 나타냅니다. 이 오류는 요청된 범위에 대한 승인이 누락되어 발생할 수도 있습니다. 다음은 이 오류의 JSON 표현입니다.
{
  "error": {
    "errors": [
      {
        "domain": "global",
        "reason": "authError",
        "message": "Invalid Credentials",
        "locationType": "header",
        "location": "Authorization",
      }
    ],
    "code": 401,
    "message": "Invalid Credentials"
  }
}
이 오류를 해결하려면 장기 갱신 토큰을 사용하여 액세스 토큰을 새로고침하세요. 클라이언트 라이브러리를 사용하는 경우 토큰 갱신이 자동으로 처리됩니다. 이 단계가 실패하면 Gmail로 앱 승인 [https://developers.google.com/workspace/gmail/api/auth/about-auth?hl=ko]에 설명된 대로 OAuth 흐름을 통해 사용자를 안내합니다.
Gmail 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/v1/reference/quota?hl=ko]를 참고하세요.
403 오류 해결: 사용량 한도 초과
사용량 한도를 초과했거나 사용자에게 올바른 권한이 없는 경우 403 오류가 발생합니다. 구체적인 오류 유형을 확인하려면 반환된 JSON의 reason 필드를 평가하세요. 이 오류는 다음 상황에서 발생합니다.
일일 한도를 초과했습니다.
사용자 비율 제한을 초과했습니다.
프로젝트 비율 제한을 초과했습니다.
인증된 사용자의 도메인 내에서 앱을 사용할 수 없습니다.
Gmail 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/v1/reference/quota?hl=ko]를 참고하세요.
403 오류 해결: 일일 한도 초과
dailyLimitExceeded 오류는 프로젝트의 무료 API 한도에 도달했음을 나타냅니다. 다음은 이 오류의 JSON 표현입니다.
{
  "error": {
    "errors": [
      {
        "domain": "usageLimits",
        "reason": "dailyLimitExceeded",
        "message": "Daily Limit Exceeded"
      }
    ],
    "code": 403,
    "message": "Daily Limit Exceeded"
  }
}
이 오류를 수정하는 방법은 다음과 같습니다.
Google API 콘솔 [https://console.cloud.google.com/?hl=ko]로 이동합니다.
프로젝트를 선택합니다.
할당량 탭을 클릭합니다.
추가 할당량을 요청합니다. 자세한 내용은 추가 할당량 요청 [https://developers.google.com/workspace/gmail/api/guides/handle-errors?hl=ko#view_quota]을 참고하세요.
Gmail 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/v1/reference/quota?hl=ko]를 참고하세요.
403 오류 해결: 사용자 비율 한도 초과
userRateLimitExceeded 오류는 사용자당 한도에 도달했음을 나타냅니다. 다음은 이 오류의 JSON 표현입니다.
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "userRateLimitExceeded",
    "message": "User Rate Limit Exceeded"
   }
  ],
  "code": 403,
  "message": "User Rate Limit Exceeded"
 }
}
이 오류를 해결하려면 요청 수를 줄이거나 요청을 재시도하도록 애플리케이션 코드를 최적화하세요. 요청 재시도에 관한 자세한 내용은 실패한 요청을 재시도하여 오류 해결하기 [https://developers.google.com/workspace/gmail/api/guides/handle-errors?hl=ko#exponential-backoff]를 참고하세요.
Gmail 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/v1/reference/quota?hl=ko]를 참고하세요.
403 오류 해결: 비율 제한 초과
rateLimitExceeded 오류는 사용자가 Gmail API의 최대 요청 비율에 도달했음을 나타냅니다. 이 한도는 요청 유형에 따라 다릅니다. 다음은 이 오류의 JSON 표현입니다.
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "message": "Rate Limit Exceeded",
    "reason": "rateLimitExceeded",
   }
  ],
  "code": 403,
  "message": "Rate Limit Exceeded"
 }
}
이 오류를 해결하려면 실패한 요청을 재시도 [https://developers.google.com/workspace/gmail/api/guides/handle-errors?hl=ko#exponential-backoff]하세요.
Gmail 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/v1/reference/quota?hl=ko]를 참고하세요.
403 오류 해결: 인증된 사용자의 도메인 내에서 ID가 {appId}인 앱을 사용할 수 없음
사용자 도메인의 정책에서 앱의 Gmail 액세스를 허용하지 않으면 domainPolicy 오류가 발생합니다. 다음은 이 오류의 JSON 표현입니다.
{
  "error": {
    "errors": [
      {
        "domain": "global",
        "reason": "domainPolicy",
        "message": "The domain administrators have disabled Gmail apps."
      }
    ],
    "code": 403,
    "message": "The domain administrators have disabled Gmail apps."
  }
}
이 오류를 수정하는 방법은 다음과 같습니다.
도메인에서 앱의 Gmail 액세스를 허용하지 않는다고 사용자에게 알립니다.
사용자에게 도메인 관리자에게 연락하여 앱에 대한 액세스 권한을 요청하도록 안내합니다.
429 오류 해결: 요청이 너무 많음
429 '요청이 너무 많음' 오류는 일일 사용자당 한도(메일 전송 한도 포함), 대역폭 한도 또는 사용자당 동시 요청 한도로 인해 발생할 수 있습니다. 각 한도에 대한 정보는 다음과 같습니다. 하지만 실패한 요청을 다시 시도 [https://developers.google.com/workspace/gmail/api/guides/handle-errors?hl=ko#exponential-backoff]하거나 여러 Gmail 계정에서 처리를 분할하면 각 한도를 해결할 수 있습니다. 어떤 이유로도 사용자당 한도를 늘릴 수 없습니다. 한도에 대한 자세한 내용은 사용량 한도 [https://developers.google.com/workspace/gmail/api/reference/quota?hl=ko]를 참고하세요.
메일 전송 한도
Gmail API는 표준 일일 메일 전송 한도를 적용합니다. 이러한 한도는 유료 Google Workspace 사용자와 무료 gmail.com 사용자에게 다르게 적용됩니다. 이러한 한도는 Google Workspace의 Gmail 전송 한도 [https://support.google.com/a/answer/166852?hl=ko]를 참고하세요.
이러한 한도는 사용자별로 적용되며 API 클라이언트, 네이티브/웹 클라이언트, SMTP MSA 등 사용자의 모든 클라이언트에서 공유됩니다. 이러한 한도를 초과하면 재시도 시간과 함께 HTTP 429 Too Many Requests '사용자 비율 제한 초과' '(메일 전송)' 오류가 반환됩니다. 일일 한도를 초과하면 요청이 수락되기 전 여러 시간 동안 이러한 유형의 오류가 발생할 수 있습니다.
메일 전송 파이프라인은 복잡합니다. 사용자가 할당량을 초과하면 API가 429 오류 응답을 반환하기까지 몇 분 정도 지연될 수 있습니다. 따라서 200 응답이 이메일이 성공적으로 전송되었음을 의미한다고 가정할 수 없습니다.
대역폭 한도
API에는 IMAP과 동일하지만 독립적인 사용자별 업로드 및 다운로드 대역폭 한도 [https://support.google.com/a/answer/1071518?hl=ko]가 있습니다. 이러한 한도는 특정 사용자의 모든 Gmail API 클라이언트 간에 공유됩니다.
이러한 한도는 일반적으로 예외적이거나 악용적인 상황에서만 적용됩니다. 이러한 한도를 초과하면 재시도 시간이 포함된 HTTP 429 Too Many Requests '사용자 비율 제한 초과' 오류가 반환됩니다. 일일 한도를 초과하면 요청이 수락되기 전에 몇 시간 동안 이러한 유형의 오류가 발생할 수 있습니다.
동시 요청
Gmail API는 사용자별 동시 요청 한도를 적용합니다 (사용자별 속도 한도 외). 이 한도는 특정 사용자에 액세스하는 모든 Gmail API 클라이언트에서 공유되며, API 클라이언트가 Gmail 사용자 편지함이나 백엔드 서버에 과부하를 주지 않도록 합니다.
단일 사용자에 대해 많은 병렬 요청을 하거나 요청 수가 많은 배치를 전송하면 이 오류가 트리거될 수 있습니다. Gmail 사용자 메일함에 동시에 액세스하는 독립 API 클라이언트가 많은 경우에도 이 오류가 발생할 수 있습니다. 이 한도를 초과하면 HTTP 429 Too Many Requests '사용자에 대한 동시 요청이 너무 많음' 오류가 반환됩니다.
500 오류 해결: 백엔드 오류
요청을 처리하는 중에 예상치 못한 오류가 발생하면 backendError가 발생합니다.
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error",
   }
  ],
  "code": 500,
  "message": "Backend Error"
 }
}
이 오류를 해결하려면 실패한 요청을 재시도 [https://developers.google.com/workspace/gmail/api/guides/handle-errors?hl=ko#exponential-backoff]하세요. 다음은 500 오류 목록입니다.
502 잘못된 게이트웨이
503 서비스를 사용할 수 없음
504 게이트웨이 시간 초과
실패한 요청을 재시도하여 오류 해결하기
시간 간격을 늘려 실패한 요청을 주기적으로 다시 시도하여 비율 제한, 네트워크 볼륨 또는 응답 시간과 관련된 오류를 처리할 수 있습니다. 예를 들어 실패한 요청을 1초 후에 재시도하고, 2초 후에 재시도하고, 4초 후에 재시도할 수 있습니다. 이 방법을 지수 백오프라고 하며, 대역폭 사용량을 개선하고 동시 환경에서 요청 처리량을 극대화하는 데 사용됩니다.
오류가 발생한 후 1초 이상 지나서 재시도 기간을 시작합니다.
사용량 한도 보기 또는 변경, 할당량 늘리기
프로젝트의 사용량 한도를 확인 또는 변경하거나 할당량 증가를 요청하려면 다음 단계를 따르세요.
프로젝트의 결제 계정 [https://cloud.google.com/billing/docs/how-to/manage-billing-account?hl=ko]이 아직 없는 경우 계정을 만듭니다.
API 콘솔에서 API 라이브러리의 사용 설정된 API 페이지를 방문 [https://console.cloud.google.com/apis/enabled?hl=ko]하여 목록에서 API를 선택합니다.
할당량 관련 설정을 확인하고 변경하려면 할당량을 선택합니다. 사용 통계를 확인하려면 사용량을 선택합니다.
일괄 요청
일괄 처리를 사용하는 것이 좋지만 배치 크기가 클수록 비율 제한이 트리거될 가능성이 높습니다. 50개가 넘는 요청을 일괄적으로 전송하는 것은 권장되지 않습니다. 요청을 일괄 처리하는 방법에 대한 자세한 내용은 요청 일괄 처리 [https://developers.google.com/workspace/gmail/api/guides/batch?hl=ko]를 참고하세요.
의견 보내기