Source URL: https://developers.google.com/maps/documentation/navigation/ios-sdk/route-customizations?hl=ko
Title: 경로 계획하기

의견 보내기

경로 계획하기

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

앱에서 사용자에게 제공하는 경로를 계획해야 할 때가 있습니다. Routes API, Routes Preferred API 또는 Route Optimization API의 경로 토큰을 사용하면 계획된 경로에 대해 다음 두 가지를 지정할 수 있습니다.

경로의 다중선
내 경로 목표

예를 들어 다음과 같은 라우팅 목표가 있을 수 있습니다.

배송 시간 최소화: 음식 배달 비즈니스는 음식 배달 시간을 최소화하는 것이 좋습니다.
이동 시간 또는 연료 소비 최소화: 물류 비즈니스에서는 운전기사의 효율성을 개선하고 연료 비용을 절감할 수 있습니다.
목적지까지의 시간 최소화: 서비스 파견 작업은 작업 요청에 작업자를 배치하는 데 걸리는 시간을 최소화할 수 있습니다.
비용 절감 및 안전 개선: 차량 공유 비즈니스에서는 승객의 비용을 절감하고 안전상의 이유로 특정 지역을 피하는 경로를 찾을 수 있습니다.

중요: 실제 이동 경로는 토큰에서 제공하는 계획된 경로와 다를 수 있습니다. 교통 상황, 도로 상황이 바뀌거나 차량이 지정된 경로에서 벗어나면 경로가 변경될 수 있습니다. 변경사항이 발생하면 Navigation SDK는 계획된 경로로 돌아가려고 계속 시도하며, 돌아가는 것이 불가능한 경우 경로 토큰의 경로 목표를 따릅니다.
경로 토큰을 사용하여 경로를 계획하는 방법에 대한 자세한 내용은 Routes API의 경로 토큰 요청 [https://developers.google.com/maps/documentation/routes/choose_fields?hl=ko#route-token] 및 Route Optimization API의 폴리라인 및 경로 토큰 전환 [https://developers.google.com/maps/documentation/route-optimization/polylines-and-route-tokens?hl=ko]을 참고하세요.

경로 목표에 경로 토큰을 사용하는 이유

Routes API, Routes Preferred API 또는 Route Optimization API의 경로 토큰을 사용하면 제공되는 경로를 더 세부적으로 제어할 수 있습니다.

가능한 경우 Navigation SDK에서 사용할 수 있도록 미리 경로를 계획합니다.
Navigation SDK에서 사용할 최적의 경로를 선택합니다. Routes API에서 경로를 생성할 때 경로 토큰을 요청하면 생성된 각 경로에 대한 경로 토큰이 제공됩니다. 그런 다음 Navigation SDK에 전달할 때 사용할 경로의 토큰을 선택할 수 있습니다.
예상 도착 시간과 거리를 포함하여 미리 가격을 추정합니다. 실제 비용과 시간은 다를 수 있지만 이 추정치를 사용하면 예상 경로 비용과 실제 경로 비용 간의 차이가 줄어듭니다.
친환경 경로 또는 최단 경로와 같은 고급 경로 목표를 지정합니다.

도움말: 경로 토큰은 특정 출발지와 목적지, 특정 시간에만 사용할 수 있습니다. 새 경로 토큰에 대해 새 Routes API, Routes Preferred API 또는 Route Optimization API 요청을 해야 합니다.
경로 토큰의 작동 방식

Routes API, Routes Preferred API 또는 Route Optimization API를 사용하여 경로 목표를 사용하는 경로를 계획할 수 있습니다. 이러한 API에서 반환된 경로 토큰을 Navigation SDK에 전달하여 차량의 경로를 지정할 수 있습니다.

경로 토큰을 요청하고 사용하면 다음과 같은 일이 발생합니다.

Routes API, Routes Preferred API 또는 Route Optimization API는 경로 폴리라인과 경로 목표를 포함하는 암호화된 경로 토큰을 반환합니다.
경로 토큰을 Navigation SDK에 전달합니다.
Navigation SDK는 경로를 가져오고, 변경된 조건으로 인해 경로를 사용할 수 없는 경우 가장 적합한 경로를 가져옵니다.
경로를 운전하는 동안 교통 상황이나 기타 도로 상황이 변경되거나 차량이 계획된 경로에서 벗어나면 수정된 경로가 토큰의 경로 목표에 따라 최적의 경로와 일치하도록 지속적으로 시도합니다.

이 프로세스를 통해 실제 경로가 계획된 경로에 최대한 가까워집니다.

계획된 경로를 정확하게 따르지 못하는 이유

계획된 경로와 경로 목표는 따라야 하는 가이드라인으로 생각하세요. 규범적인 것은 아닙니다. 계획한 경로와 안내 내비게이션에서 제공하는 경로가 다를 수 있습니다. 이는 계획한 경로를 만든 후 도로 상황, 시작 위치 또는 기타 매개변수가 변경되었기 때문입니다. 이 차이로 인해 거리 및 예상 도착 시간과 기타 중요한 여정 품질에 대한 계획된 목표와 실제 목표 간에 불일치가 발생할 수 있습니다.
도움말: 권장사항에 따라 Navigation SDK에서 목적지를 설정할 때마다 항상 새 경로 토큰을 요청하고 비즈니스에 영향을 미치지 않도록 약간의 변동을 계획하세요.
경로 토큰을 사용하여 경로 계획하기

다음 단계에 설명된 대로 경로 토큰을 만든 다음 Navigation SDK에 전달하여 경로를 계획할 수 있습니다.

1단계: Routes API, Routes Preferred API 또는 Route Optimization API를 사용하여 경로 토큰 만들기

다음 방법 중 하나를 사용하여 경로 토큰을 요청합니다.

Routes API: computeRoutes. Routes API에서 경로 토큰을 요청하는 방법에 관한 자세한 내용은 경로 계산 [https://developers.google.com/maps/documentation/routes/compute_route_directions?hl=ko] 및 경로 토큰 요청 [https://developers.google.com/maps/documentation/routes/choose_fields?hl=ko#route-token]을 참고하세요.
Routes Preferred API: computeCustomRoutes. Routes Preferred API에서 경로 토큰을 요청하는 방법에 관한 자세한 내용은 경로 계획 [https://developers.google.com/maps/documentation/routes_preferred/custom_routes?hl=ko]을 참고하세요.
Route Optimization API: optimizeTours 또는 batchOptimizeTours Route Optimization API에서 경로 토큰을 요청하는 방법에 대한 자세한 내용은 폴리라인 및 경로 토큰 전환 [https://developers.google.com/maps/documentation/route-optimization/polylines-and-route-tokens?hl=ko]을 참고하세요.

경로 토큰 사용 요구사항을 충족하도록 Routes API 또는 Routes Preferred API 요청을 설정합니다.

travel_mode을 DRIVING 또는 TWO_WHEELER로 설정합니다.
routing_preference을 TRAFFIC_AWARE 또는 TRAFFIC_AWARE_OPTIMAL로 설정합니다.
Via 경유지를 사용하지 마세요.

2단계: 경로 토큰을 Navigation SDK에 전달

경로 토큰 저장: Navigation SDK에서 경로 토큰을 저장하는 문자열을 설정합니다. 예를 들면 다음과 같습니다.
mapView.navigator?.setDestinations([waypoint1, waypoint2], routeToken: routeToken, callback: {...})

참고: 동일한 경로를 다시 이동해야 하는 경우 새 경로 토큰을 요청하세요.
Navigator.setDestinations 메서드는 요청 상태를 반환합니다.
사용자의 위치에서 지정된 목적지까지의 경로가 발견되면 RouteStatus.OK를 반환합니다.

이 메서드에 관한 자세한 내용은 GMSNavigator.setDestinations [https://developers.google.com/maps/documentation/navigation/ios-sdk/reference/objc/Classes/GMSNavigator?hl=ko#-setdestinations:callback:]을 참고하세요.

예

다음 코드 예에서는 계획된 경로를 가져오는 방법을 보여줍니다.

Swift
Objective-C
CLLocationCoordinate2D location = CLLocationCoordinate2DMake(47.67, -122.20);
GMSNavigationWaypoint *waypoint1 = [[GMSNavigationWaypoint alloc] initWithLocation:coordinate title:@"waypoint from location"];
GMSNavigationWaypoint *waypoint2 = [[GMSNavigationWaypoint alloc] initWithPlaceID:@"samplePlaceID"
NSString *routeToken = @"route token returned by Routes API";

[mapView.navigator setDestinations:@[waypoint1, waypoint2]
routeToken:routeToken
Navigation SDK에서 생성된 경로와 경로 토큰의 계획된 경로가 상호작용하는 방식은 다음과 같습니다.

이전에 설정된 대상을 재정의합니다.
차량 시작 위치를 사용합니다.
도로 및 교통 상황에 맞게 조정합니다. 계획된 경로를 정확하게 따르지 않는 이유 [https://developers.google.com/maps/documentation/navigation/ios-sdk/route-customizations?hl=ko#not-followed]를 참고하세요.
다음 라우팅 관련 옵션을 불필요한 것으로 무시합니다.

avoidsHighways
avoidsTolls
avoidsFerries
licensePlateRestriction

팔로우:

경유지 관련 옵션(예: 도로 측면 환경설정)
경로 목표 Navigation SDK에서 반환된 경로를 조정해야 하는 경우 경로 토큰을 요청할 때 지정한 경로 목표를 사용합니다. 따라서 Routes API에서 지정한 것과 동일한 경유지 관련 옵션을 사용해야 합니다.

의견 보내기