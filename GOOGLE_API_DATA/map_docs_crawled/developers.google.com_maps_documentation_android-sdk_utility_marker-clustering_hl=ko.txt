Source URL: https://developers.google.com/maps/documentation/android-sdk/utility/marker-clustering?hl=ko
Title: Google 지도 Android 마커 클러스터링 유틸리티

의견 보내기

Google 지도 Android 마커 클러스터링 유틸리티

컬렉션을 사용해 정리하기

내 환경설정을 기준으로 콘텐츠를 저장하고 분류하세요.

플랫폼 선택:

Android [https://developers.google.com/maps/documentation/android-sdk/utility/marker-clustering?hl=ko]

iOS [https://developers.google.com/maps/documentation/ios-sdk/utility/marker-clustering?hl=ko]

JavaScript [https://developers.google.com/maps/documentation/javascript/marker-clustering?hl=ko]

마커를 클러스터링하면 지도의 가독성을 해치지 않으면서도
지도에 많은 마커를 넣을 수 있습니다.

소개

이 동영상은 데이터가 지도에서 다수의 데이터 포인트가 필요한 경우,
마커 클러스터링을 사용하는 방법을 설명합니다.

마커 클러스터링 유틸리티를 사용하면 다양한 확대/축소 수준에서
여러 개의 마커를 관리할 수 있습니다. 엄밀히 말하면, 이 시점에서 '마커'는 실제로 '항목'이고
렌더링되었을 때만 '마커'가 됩니다. 그러나 혼동을 피하기 위해
이 문서에서는 이름을 모두 '마커'로 통일합니다.

사용자가 지도 화면을 확대하면
개별 마커가 지도에 나타납니다. 사용자가 지도 화면을 축소하면 마커가
클러스터로 모여서 지도를 보기 쉽게 해줍니다. 마커 클러스터링 유틸리티는
Android용 Maps SDK 유틸리티 라이브러리 [https://developers.google.com/maps/documentation/android-sdk/utility?hl=ko]의 일부에 속합니다. 아직 라이브러리를 설정하지 않았다면
이 페이지의 나머지 부분을 읽기 전에 설정 가이드 [https://developers.google.com/maps/documentation/android-sdk/utility/setup?hl=ko]를
따르세요.

클러스터형 마커

마커 클러스터링 유틸리티를 사용하려면 마커를
ClusterManager에 ClusterItem 객체로 추가해야 합니다. ClusterManager는
마커를 Algorithm으로 전달하여
이를 클러스터 집합으로 변환합니다. ClusterRenderer는
클러스터와 개별 마커를 추가 및 삭제하여 렌더링을
처리합니다. ClusterRenderer 및 Algorithm은
플러깅이 가능하며 맞춤설정할 수 있습니다.

유틸리티 라이브러리와 함께 마커 클러스터링 유틸리티의 샘플 구현이
포함된 데모 앱이 제공됩니다. 데모 앱 실행에 관한 도움말은
설정 가이드 [https://developers.google.com/maps/documentation/android-sdk/utility/setup?hl=ko]를 참고하세요. 데모 앱에는
다음과 같은 마커 클러스터링 샘플이 포함되어 있습니다.

ClusteringDemoActivity: 마커 클러스터링을 보여주는
간단한 활동
BigClusteringDemoActivity: 2,000개 마커의
클러스터링
CustomMarkerClusteringDemoActivity: 클러스터형 마커의
맞춤 디자인 생성

간단한 마커 클러스터러 추가

아래 단계에 따라 10개의 마커로 구성된 간단한 클러스터를 생성합니다. 그 결과는
다음과 같이 표시되며, 이때 표시되는/클러스터링되는 마커 수는
확대/축소 수준에 따라 달라집니다.

10개의 클러스터형 마커

다음은 필요한 단계를 요약한 내용입니다.

ClusterItem [https://github.com/googlemaps/android-maps-utils/blob/master/library/src/main/java/com/google/maps/android/clustering/ClusterItem.java]을
구현하여 지도에
마커를 표시합니다. 클러스터 항목은 LatLng 객체로 마커의 위치를
반환하고 선택사항으로 제목 또는 스니펫을 반환합니다.
새 ClusterManager [https://github.com/googlemaps/android-maps-utils/blob/master/library/src/main/java/com/google/maps/android/clustering/ClusterManager.java]를
추가하여 확대/축소 수준에 따라
클러스터 항목(마커)을 그룹화합니다.
ClusterManager가 리스너를 구현하므로
지도의 OnCameraIdleListener()를 ClusterManager로
설정합니다.
마커 클릭 이벤트에 응답하여 특정 기능을
추가하려면 ClusterManager가 리스너를 구현하므로
지도의 OnMarkerClickListener()를 ClusterManager로
설정하세요.
마커를 ClusterManager에 공급합니다.

단계를 더 자세히 살펴보겠습니다. 10개의 마커로 구성된
간단한 클러스터를 만들려면 먼저 ClusterItem을 구현하는 MyItem 클래스를
만듭니다.

Kotlin

inner class MyItem(
lat: Double,
lng: Double,
snippet: String
) : ClusterItem {

private val position: LatLng
private val title: String
private val snippet: String

override fun getPosition(): LatLng {
return position
this.title = title
this.snippet = snippet

public class MyItem implements ClusterItem {
private final LatLng position;
private final String title;
private final String snippet;

public MyItem(double lat, double lng, String title, String snippet) {
position = new LatLng(lat, lng);
this.title = title;
this.snippet = snippet;

map.setOnMarkerClickListener(clusterManager)

lat += offset
lng += offset
val offsetItem =
MyItem(lat, lng, "Title $i", "Snippet $i")
clusterManager.addItem(offsetItem)

private void setUpClusterer() {

map.setOnMarkerClickListener(clusterManager);

double lng = -0.1270060;

lat = lat + offset;
lng = lng + offset;
MyItem offsetItem = new MyItem(lat, lng, "Title " + i, "Snippet " + i);
clusterManager.addItem(offsetItem);

Kotlin

clusterManager.setAnimation(false)

Java

clusterManager.setAnimation(false);

개별적으로 클러스터링된 마커에 대한 정보 창 추가
특정 클러스터형 마커의 정보 창을 추가하려면 ClusterItem의 구현
생성자에 제목과 스니펫 문자열을 추가합니다.

다음 예시에서는 제목과 스니펫을 설정하여 addItems()
메서드에 정보 창이 있는 마커를 추가합니다.

Kotlin

val lng = -0.122

val snippet = "and this is the snippet."

Java

double lng = -0.122;

String title = "This is the title";
String snippet = "and this is the snippet.";

MyItem infoWindowItem = new MyItem(lat, lng, title, snippet);

마커 클러스터 맞춤설정

ClusterManager 생성자는 DefaultClusterRenderer
및 NonHierarchicalDistanceBasedAlgorithm을
생성합니다. ClusterManager의 setAlgorithm(Algorithm<T> algorithm)
및 setRenderer(ClusterRenderer<T> view) 메서드를
사용하여 ClusterRenderer
및 Algorithm을 변경할 수
있습니다.

ClusterRenderer를 구현하여 클러스터 렌더링을
맞춤설정할 수 있습니다. DefaultClusterRenderer는 좋은 시작 기반을
제공합니다. DefaultClusterRenderer의 서브클래스를 생성하여 기본값을
재정의할 수 있습니다.

맞춤설정의 자세한 예는 유틸리티 라이브러리와
함께 제공되는 데모 앱에서 CustomMarkerClusteringDemoActivity를
참고하세요.

맞춤 클러스터형 마커

CustomMarkerClusteringDemoActivity는 자체 클러스터
항목 Person을 정의하고
DefaultClusterRenderer를 PersonRenderer로 확장하여 렌더링합니다.

또한 데모는 ClusterManager.OnClusterClickListener<Person> 인터페이스를
구현하여 클러스터를 클릭했을 때
사람에 대한 자세한 정보를 표시하는 방법도 보여줍니다. 이와 비슷한
방식으로 ClusterManager.OnClusterItemClickListener<Person>을
구현할 수도
있습니다.

데모 앱 실행에 관한 도움말은
설정 가이드 [https://developers.google.com/maps/documentation/android-sdk/utility/setup?hl=ko]를 참고하세요.

의견 보내기